# ===========================================
# D&D Platform Environment Configuration
# ===========================================
# Copy this file to .env and fill in values

# -----------------------------
# Database
# -----------------------------
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/dnd_dev"
DATABASE_LOG_QUERIES=false

# -----------------------------
# Redis
# -----------------------------
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD=

# -----------------------------
# JWT / Auth
# -----------------------------
# Generate with: openssl rand -base64 32
JWT_SECRET="your-super-secret-key-at-least-32-characters-long"
JWT_EXPIRES_IN="15m"
REFRESH_TOKEN_EXPIRES_IN="7d"

# -----------------------------
# Service URLs (Development)
# -----------------------------
# API Gateway (public)
API_GATEWAY_URL="http://localhost:4000"
API_GATEWAY_PORT=4000

# Game State Server (internal)
GAME_STATE_URL="http://localhost:4001"
GAME_STATE_PORT=4001

# WebSocket Gateway
WS_GATEWAY_URL="ws://localhost:4002"
WS_GATEWAY_PORT=4002

# Rust Services (gRPC)
RULES_ENGINE_URL="localhost:50051"
GRID_SOLVER_URL="localhost:50052"
AI_SERVICE_URL="localhost:50053"

# -----------------------------
# Web Client
# -----------------------------
NEXT_PUBLIC_API_URL="http://localhost:4000"
NEXT_PUBLIC_WS_URL="ws://localhost:4002"
NEXT_PUBLIC_AI_SERVICE_URL="http://localhost:4003"

# -----------------------------
# Object Storage (MinIO/S3)
# -----------------------------
# S3-compatible storage for permanent AI image storage
# MinIO for local development, AWS S3 or Cloudflare R2 for production
S3_ENDPOINT="http://localhost:9000"
S3_ACCESS_KEY="minioadmin"
S3_SECRET_KEY="minioadmin"
S3_BUCKET_ASSETS="dnd-assets"
S3_BUCKET_MEDIA="dnd-media"
S3_REGION="us-east-1"
# Public URL for accessing stored files (CDN URL or direct S3 endpoint)
# This is used in image URLs returned to clients
# For Cloudflare R2 with r2.dev: use the pub-xxx.r2.dev URL
S3_PUBLIC_URL="http://localhost:9000"
# Set to "true" if your public URL requires bucket name in path (MinIO, some S3 configs)
# For Cloudflare R2 r2.dev URLs, leave this unset or "false"
S3_PUBLIC_URL_INCLUDE_BUCKET="false"

# -----------------------------
# Logging
# -----------------------------
LOG_LEVEL="debug"
LOG_FORMAT="pretty"

# -----------------------------
# Environment
# -----------------------------
NODE_ENV="development"

# -----------------------------
# AI Image Generation (NanoBanana API)
# -----------------------------
# Get your API key from https://nanobananaapi.ai
NANOBANANA_API_KEY=""
# Maximum daily spend in USD (cost control)
NANOBANANA_MAX_DAILY_SPEND=10.00
# Default quality: standard (~$0.02/image) or high (~$0.12/image)
NANOBANANA_DEFAULT_QUALITY=standard

# -----------------------------
# Claude AI (Campaign Studio)
# -----------------------------
# Get your API key from https://console.anthropic.com
ANTHROPIC_API_KEY=""
# Model selection (hybrid approach)
CLAUDE_MODEL_CHAT=claude-sonnet-4-20250514
CLAUDE_MODEL_GENERATION=claude-opus-4-20250514
# Cost control
CLAUDE_MAX_DAILY_SPEND=50.00

# -----------------------------
# Runway Gen-3 (Video Generation)
# -----------------------------
# Get your API key from https://runwayml.com
RUNWAY_API_KEY=""
# Video settings
RUNWAY_DEFAULT_DURATION=5
RUNWAY_MAX_VIDEOS_PER_CAMPAIGN=10

# -----------------------------
# ElevenLabs (Text-to-Speech)
# -----------------------------
# Get your API key from https://elevenlabs.io
ELEVENLABS_API_KEY=""
# Voice settings
ELEVENLABS_DEFAULT_VOICE=narrator
ELEVENLABS_MAX_MINUTES_PER_CAMPAIGN=30

# -----------------------------
# Feature Flags
# -----------------------------
FEATURE_AI_GENERATION=true
FEATURE_AI_CAMPAIGN_STUDIO=true
FEATURE_VIDEO_CUTSCENES=true
FEATURE_TTS_NARRATION=true
FEATURE_VOICE_CHAT=false
FEATURE_CAMPAIGN_MARKETPLACE=false
